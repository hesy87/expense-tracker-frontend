<div class="space-y-6 pb-20">
  <header>
    <h1 class="text-2xl font-bold text-slate-900">History</h1>
    <p class="text-slate-500">Your spending timeline.</p>
  </header>

  @if (expenses.length) {
    <div class="space-y-8">
      @for (group of groupedList; track group) {
        <div>
          <h3 class="text-sm font-medium text-zinc-500 mb-4 px-1 sticky top-0 bg-slate-50 py-2 z-10">{{ group.date }}</h3>
          <div class="space-y-1">
            @for (expense of group.items; track expense) {
              <div class="group flex items-center justify-between p-3 rounded-xl hover:bg-white transition-colors">
                <div class="flex items-center gap-4">
                  <div class="h-10 w-10 rounded-full bg-white border border-zinc-100 flex items-center justify-center text-lg shrink-0 text-zinc-500">
                    {{ getCategoryIcon(expense.category) }}
                  </div>
                  <div class="overflow-hidden">
                    <p class="font-medium text-zinc-900 truncate text-sm">{{ expense.category }}</p>
                    <p class="text-xs text-zinc-500 truncate max-w-[150px]">
                      {{ expense.description || expense.location || formatTime(expense.date) }}
                    </p>
                  </div>
                </div>
                <div class="flex items-center gap-3">
                  <span class="font-medium text-zinc-900 text-sm">-{{ formatCurrency(expense.amount) }}</span>
                  <button
                    mat-icon-button
                    class="h-8 w-8 text-zinc-300 hover:text-red-500 hover:bg-red-50 opacity-0 group-hover:opacity-100 transition-opacity"
                    (click)="deleteExpense(expense.id)"
                    >
                    <mat-icon>delete</mat-icon>
                  </button>
                </div>
              </div>
            }
          </div>
        </div>
      }
    </div>
  } @else {
    <div class="text-center py-20">
      <p class="text-zinc-400 text-sm">No transactions found.</p>
    </div>
  }

</div>
