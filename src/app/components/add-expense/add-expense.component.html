<div class="flex flex-col h-full bg-slate-50">
  <header class="flex items-center p-4 bg-white/80 backdrop-blur-md border-b border-zinc-100 sticky top-0 z-10">
    <button mat-icon-button (click)="back.emit()" class="-ml-2 mr-2 text-zinc-500 hover:text-zinc-900 hover:bg-zinc-100">
      <mat-icon>arrow_back</mat-icon>
    </button>
    <h1 class="text-lg font-medium text-zinc-900">Add Expense</h1>
  </header>

  <div class="flex-1 overflow-y-auto p-4 space-y-6">
    <div class="bg-white rounded-2xl p-8 shadow-sm border border-zinc-100 text-center">
      <label class="text-xs text-zinc-400 font-medium uppercase tracking-wider">Amount</label>
      <div class="flex items-center justify-center mt-4">
        <span class="text-4xl font-light text-zinc-300 mr-2">â‚¬</span>
        <input
          type="number"
          [(ngModel)]="amount"
          placeholder="0.00"
          class="text-5xl font-light text-zinc-900 placeholder:text-zinc-200 bg-transparent border-none outline-none w-48 text-center p-0 m-0 focus:ring-0"
          autofocus
          />
      </div>
    </div>

    <div>
      <label class="text-sm text-zinc-500 font-medium mb-3 block px-1">Category</label>
      <div class="grid grid-cols-3 gap-3">
        @for (cat of categories; track cat) {
          <button
            type="button"
            (click)="category = cat.id"
          [ngClass]="category === cat.id
            ? 'bg-zinc-900 border-zinc-900 text-white shadow-md scale-[1.02]'
            : 'bg-white border-zinc-100 text-zinc-600 hover:bg-zinc-50 hover:border-zinc-200'"
            class="flex flex-col items-center justify-center p-4 rounded-xl border transition-all duration-200"
            >
            <span class="text-2xl mb-1 filter grayscale-[0.2]">{{ cat.icon }}</span>
            <span class="text-xs font-medium">{{ cat.label }}</span>
          </button>
        }
      </div>
    </div>

    <div class="space-y-4">
      <div class="bg-white rounded-xl border border-zinc-100 p-4 space-y-4">
        <div class="flex items-center gap-4">
          <div class="bg-zinc-50 text-zinc-500 p-2.5 rounded-xl">
            <mat-icon>schedule</mat-icon>
          </div>
          <div class="flex-1">
            <p class="text-xs text-zinc-400 font-medium mb-0.5">Time</p>
            <p class="text-sm font-medium text-zinc-900">Just now</p>
          </div>
        </div>

        <div class="h-px bg-zinc-50 w-full"></div>

        <div class="flex items-center gap-4">
          <div class="bg-zinc-50 text-zinc-500 p-2.5 rounded-xl">
            @if (!isLocating) {
              <mat-icon>location_on</mat-icon>
            }
            @if (isLocating) {
              <mat-icon class="animate-spin">autorenew</mat-icon>
            }
          </div>
          <div class="flex-1">
            <p class="text-xs text-zinc-400 font-medium mb-0.5">Location</p>
            <input
              class="text-sm font-medium text-zinc-900 bg-transparent outline-none w-full placeholder:text-zinc-300"
              [(ngModel)]="location"
              />
          </div>
        </div>
      </div>

      <mat-form-field appearance="outline" class="w-full bg-white">
        <input matInput placeholder="Add a note... (optional)" [(ngModel)]="description" />
      </mat-form-field>
    </div>
  </div>

  <div class="p-4 bg-white border-t border-zinc-100 sticky bottom-0">
    <button
      mat-raised-button
      color="primary"
      class="w-full h-12 text-base font-medium shadow-lg shadow-zinc-900/10 bg-zinc-900 hover:bg-zinc-800 text-white"
      [disabled]="loading || !amount || !category"
      (click)="submit()"
      >
      @if (loading) {
        <mat-icon class="mr-2">autorenew</mat-icon>
      }
      {{ loading ? 'Saving...' : 'Save Expense' }}
    </button>
  </div>
</div>
